<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>pytorchåŸºç¡€ | å“ˆçš®ğŸ–</title><meta name="description" content="pytorchåŸºç¡€"><meta name="keywords" content="pytorch,å…¥é—¨"><meta name="author" content="Paul Yu"><meta name="copyright" content="Paul Yu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="pytorchåŸºç¡€"><meta name="twitter:description" content="pytorchåŸºç¡€"><meta name="twitter:image" content="http://image-paul-blogs.test.upcdn.net/blog/a13.jpg"><meta property="og:type" content="article"><meta property="og:title" content="pytorchåŸºç¡€"><meta property="og:url" content="http://yoursite.com/2020/03/08/pytorch%E5%9F%BA%E7%A1%80/"><meta property="og:site_name" content="å“ˆçš®ğŸ–"><meta property="og:description" content="pytorchåŸºç¡€"><meta property="og:image" content="http://image-paul-blogs.test.upcdn.net/blog/a13.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2020/03/08/pytorch%E5%9F%BA%E7%A1%80/"><link rel="prev" title="å¯è§†åŒ–ä¹‹Matplotlib(ä¸€)" href="http://yoursite.com/2020/03/12/%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8BMatplotlib(%E4%B8%80)/"><link rel="next" title="ç¥ç»ç½‘ç»œ--çº¿æ€§æ¨¡å‹ä¸æ¢¯åº¦ä¸‹é™" href="http://yoursite.com/2020/03/08/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,è‡ªç”±,å¹³ç­‰,å…¬æ­£,æ³•æ²»,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">å“ˆçš®ğŸ–</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/download/"><i class="fa-fw fa fa-download"></i><span> ä¸‹è½½ç«™</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> å¨±ä¹</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-picture-o"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">11</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">11</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">13</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/download/"><i class="fa-fw fa fa-download"></i><span> ä¸‹è½½ç«™</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> å¨±ä¹</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-picture-o"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#pytorchåŸºç¡€"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text"> pytorchåŸºç¡€</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å¼ é‡tensor"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text"> å¼ é‡(Tensor)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#pytorchè‡ªåŠ¨å¾®åˆ†"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text"> Pytorchè‡ªåŠ¨å¾®åˆ†</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#tensor"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text"> TENSOR</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#è‡ªåŠ¨æ±‚å¯¼"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text"> è‡ªåŠ¨æ±‚å¯¼</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#ç®€å•æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"><span class="toc_mobile_items-number">2.2.1.</span> <span class="toc_mobile_items-text"> ç®€å•æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#å¤æ‚æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"><span class="toc_mobile_items-number">2.2.2.</span> <span class="toc_mobile_items-text"> å¤æ‚æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#å¤šæ¬¡è‡ªåŠ¨æ±‚å¯¼"><span class="toc_mobile_items-number">2.2.3.</span> <span class="toc_mobile_items-text"> å¤šæ¬¡è‡ªåŠ¨æ±‚å¯¼</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#pytorchåŸºç¡€"><span class="toc-number">1.</span> <span class="toc-text"> pytorchåŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼ é‡tensor"><span class="toc-number">1.1.</span> <span class="toc-text"> å¼ é‡(Tensor)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pytorchè‡ªåŠ¨å¾®åˆ†"><span class="toc-number">2.</span> <span class="toc-text"> Pytorchè‡ªåŠ¨å¾®åˆ†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tensor"><span class="toc-number">2.1.</span> <span class="toc-text"> TENSOR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è‡ªåŠ¨æ±‚å¯¼"><span class="toc-number">2.2.</span> <span class="toc-text"> è‡ªåŠ¨æ±‚å¯¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç®€å•æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"><span class="toc-number">2.2.1.</span> <span class="toc-text"> ç®€å•æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¤æ‚æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"><span class="toc-number">2.2.2.</span> <span class="toc-text"> å¤æ‚æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¤šæ¬¡è‡ªåŠ¨æ±‚å¯¼"><span class="toc-number">2.2.3.</span> <span class="toc-text"> å¤šæ¬¡è‡ªåŠ¨æ±‚å¯¼</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(http://image-paul-blogs.test.upcdn.net/blog/a13.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">pytorchåŸºç¡€</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2020-03-08<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2020-03-08</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">æ·±åº¦å­¦ä¹ </a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/pytorch%E5%9F%BA%E7%A1%80/">pytorchåŸºç¡€</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>å­—æ•°æ€»è®¡:</span><span class="word-count">1.7k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>é˜…è¯»æ—¶é•¿: 7 åˆ†é’Ÿ</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><script src="/assets/js/APlayer.min.js"> </script><h1 id="pytorchåŸºç¡€"><a class="markdownIt-Anchor" href="#pytorchåŸºç¡€"></a> pytorchåŸºç¡€</h1>
<h2 id="å¼ é‡tensor"><a class="markdownIt-Anchor" href="#å¼ é‡tensor"></a> å¼ é‡(Tensor)</h2>
<p>pytorchä¸­å¤„ç†çš„åŸºæœ¬å¯¹è±¡å°±æ˜¯Tensorï¼Œè¡¨ç¤ºä¸€ä¸ªå¤šç»´çš„çŸ©é˜µã€‚ä¸€ç»´å°±æ˜¯å‘é‡ï¼ŒäºŒç»´å°±æ˜¯ä¸€èˆ¬çŸ©é˜µï¼Œå¤šç»´å°±æ˜¯å¼ é‡ã€‚ä¸åŒæ•°æ®ç±»å‹çš„Tensorï¼Œæœ‰32ä½æµ®ç‚¹å‹torch.FloatTensorã€64ä½æµ®ç‚¹å‹torch.DoubleTensorã€16ä½æ•´å‹torch.ShortTensorã€32ä½æ•´å‹torch.IntTensorã€64ä½æ•´å‹torch.LongTensorã€‚torch.Tensoræ¨¡å¼æ˜¯32ä½æµ®ç‚¹å‹ã€‚</p>
<p><a href="http://image-paul-blogs.test.upcdn.net/pytorch/p02.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p02.png" class="lazyload"></a></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = torch.Tensor([[<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">8</span>],[<span class="number">7</span>,<span class="number">9</span>]])</span><br><span class="line">print(<span class="string">'a size is &#123;&#125;'</span>.format(a.size())) <span class="comment"># 3,2</span></span><br><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªå…¨æ˜¯0çš„ç©ºTensorï¼Œæˆ–è€…å–éšæœºæ­£æ€åˆ†å¸ƒä½œä¸ºåˆå§‹å€¼</span></span><br><span class="line">b = torch.zeros((<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line">print(<span class="string">'zero tensor:&#123;&#125;'</span>.format(c))</span><br><span class="line">d = torch.randn((<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line">print(<span class="string">'normal randn is:&#123;&#125;'</span>.format(d))</span><br></pre></td></tr></table></figure></div>
<p>å¯ä»¥é€šè¿‡ç´¢å¼•æ–¹å¼å–å¾—å…¶ä¸­å…ƒç´ ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ”¹å˜å®ƒçš„å€¼ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">0</span>,<span class="number">1</span>] = <span class="number">100</span></span><br></pre></td></tr></table></figure></div>
<p>åˆ›å»ºä¸€ä¸ªtensoråŸºäºå·²ç»å­˜åœ¨çš„tensor</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªtensoråŸºäºå·²ç»å­˜åœ¨çš„tensor</span></span><br><span class="line">x = torch.tensor([<span class="number">5.5</span>,<span class="number">3</span>])</span><br><span class="line">x = x.new_ones(<span class="number">5</span>,<span class="number">3</span>,dtype=torch.double)</span><br><span class="line">print(x)</span><br><span class="line">x = torch.randn_like(x,dtype=torch.float)</span><br><span class="line">print(x)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([[ 1.,  1.,  1.],</span></span><br><span class="line"><span class="string">        [ 1.,  1.,  1.],</span></span><br><span class="line"><span class="string">        [ 1.,  1.,  1.],</span></span><br><span class="line"><span class="string">        [ 1.,  1.,  1.],</span></span><br><span class="line"><span class="string">        [ 1.,  1.,  1.]], dtype=torch.float64)</span></span><br><span class="line"><span class="string">tensor([[-0.2183,  0.4477, -0.4053],</span></span><br><span class="line"><span class="string">        [ 1.7353, -0.0048,  1.2177],</span></span><br><span class="line"><span class="string">        [-1.1111,  1.0878,  0.9722],</span></span><br><span class="line"><span class="string">        [-0.7771, -0.2174,  0.0412],</span></span><br><span class="line"><span class="string">        [-2.1750,  1.3609, -0.3322]])'''</span></span><br></pre></td></tr></table></figure></div>
<p>å¯¹tensorçš„æ“ä½œï¼ˆä»¥åŠ æ³•ä¸ºä¾‹ï¼‰ï¼š</p>
<ol>
<li>
<pre class="highlight"><code class="python">y = torch.rand(<span class="number">5</span>,<span class="number">3</span>)
print(x+y)
<span class="comment">#output</span>
<span class="string">'''
tensor([[-0.1859,  1.3970,  0.5236],
        [ 2.3854,  0.0707,  2.1970],
        [-0.3587,  1.2359,  1.8951],
        [-0.1189, -0.1376,  0.4647],
        [-1.8968,  2.0164,  0.1092]])'''</span>
&lt;!--ï¿¼<span class="number">3</span>--&gt;

</code></pre>
</li>
<li>
<pre class="highlight"><code class="python"><span class="comment">#æä¾›ä¸€ä¸ªè¾“å‡ºtensorä½œä¸ºå‚æ•°</span>
result = torch.empty(<span class="number">5</span>, <span class="number">3</span>)
torch.add(x, y, out=result)
print(result)
&lt;!--ï¿¼<span class="number">4</span>--&gt;

</code></pre>
</li>
</ol>
<p>è¿˜å¯ä»¥åœ¨Tensorå’Œnumpy.ndarrayä¹‹é—´ç›¸äº’è½¬æ¢</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">numpy_b  = b.numpy()</span><br><span class="line">print(type(numpy_b))</span><br><span class="line">print(<span class="string">'cover to numpy is\n:&#123;&#125;'</span>.format(numpy_b))</span><br><span class="line"></span><br><span class="line">e = np.array([[<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>]])</span><br><span class="line">torch_e = torch.from_numpy(e)</span><br><span class="line">print(<span class="string">'from numpy to torch.Tensor is &#123;&#125;:'</span>.format(torch_e))</span><br><span class="line">f_torch_e = torch_e.float()</span><br><span class="line">print(<span class="string">'changed data type to float tensor:&#123;&#125;'</span>.format(f_torch_e))</span><br></pre></td></tr></table></figure></div>
<p>é€šè¿‡numpy()å‡½æ•°å°±èƒ½å°†tensorç±»å‹è½¬ä¸ºnumpyç±»å‹ã€‚åŒæ—¶ä½¿ç”¨torch.from_numpy()å°±èƒ½å°†numpyè½¬æ¢ä¸ºtensorç±»å‹ã€‚</p>
<p>å¦‚æœè¦æ”¹å˜ä¸€ä¸ªtensorçš„å¤§å°å’Œå½¢çŠ¶ï¼Œå¯ä»¥é€šè¿‡torch.view</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">y = x.view(<span class="number">16</span>)</span><br><span class="line">z = x.view(<span class="number">-1</span>, <span class="number">8</span>)  <span class="comment"># the size -1 is inferred from other dimensions</span></span><br><span class="line">print(x.size(), y.size(), z.size())</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">torch.Size([4, 4]) torch.Size([16]) torch.Size([2, 8])'''</span></span><br></pre></td></tr></table></figure></div>
<p>å¦‚æœæœ‰ä¸€ä¸ªå…ƒç´ tensorå¯ä»¥ä½¿ç”¨.itemè·å–tensorçš„å€¼</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">1</span>)</span><br><span class="line">print(x)</span><br><span class="line">print(x.item())</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([ 0.9422])</span></span><br><span class="line"><span class="string">0.9422121644020081'''</span></span><br></pre></td></tr></table></figure></div>
<h1 id="pytorchè‡ªåŠ¨å¾®åˆ†"><a class="markdownIt-Anchor" href="#pytorchè‡ªåŠ¨å¾®åˆ†"></a> Pytorchè‡ªåŠ¨å¾®åˆ†</h1>
<h2 id="tensor"><a class="markdownIt-Anchor" href="#tensor"></a> TENSOR</h2>
<p><code>torch.Tensor</code>æ˜¯åŒ…çš„æ ¸å¿ƒç±»ã€‚å¦‚æœå°†å±æ€§<code>.requires_grad</code>è®¾ç½®ä¸º<strong>True</strong>ï¼Œåˆ™ä¼šå¼€å§‹è·Ÿè¸ªé’ˆå¯¹tensorçš„æ‰€æœ‰æ“ä½œã€‚å®Œæˆè®¡ç®—åï¼Œå¯ä»¥è°ƒç”¨<code>.backward()</code>æ¥è‡ªåŠ¨è®¡ç®—æ‰€æœ‰æ¢¯åº¦ã€‚è¯¥å¼ é‡çš„æ¢¯åº¦å°†ç´¯ç§¯åˆ°<code>.grad</code>å±æ€§ä¸­ã€‚</p>
<p>è¦åœæ­¢tensorå†å²è®°å½•è¿½è¸ªï¼Œå¯ä»¥è°ƒç”¨.detach()ã€‚å®ƒå°†å…¶ä¸è®¡ç®—å†å²è®°å½•åˆ†ç¦»ï¼Œå¹¶é˜²æ­¢å°†æ¥çš„è®¡ç®—è¢«è¿½è¸ªã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªç±»å¯¹äºå®ç°autogradéå¸¸é‡è¦ï¼Œå°±æ˜¯Functionã€‚Tensorå’ŒFunctionäº’ç›¸è¿æ¥å¹¶æ„æˆäº†ä¸€ä¸ªéå¾ªç¯å›¾ï¼Œå®ƒä¿å­˜äº†å®Œæ•´çš„è®¡ç®—è¿‡ç¨‹å†å²ä¿¡æ¯ã€‚æ¯ä¸ªå¼ é‡éƒ½æœ‰ä¸€ä¸ª.grad_fnå±æ€§ä¿å­˜ç€åˆ›å»ºäº†å¼ é‡çš„Functionå¼•ç”¨ã€‚</p>
<p>å¦‚æœæƒ³è®¡ç®—å¯¼æ•°å¯ä»¥è°ƒç”¨Tensor.backward(),å¦‚æœTensoræ˜¯æ ‡é‡ï¼Œå³åªæœ‰ä¸€ä¸ªæ•°æ®å…ƒç´ ï¼Œåˆ™ä¸éœ€è¦æŒ‡å®šä»»ä½•å‚æ•°backward()ã€‚ä½†å¦‚æœæœ‰æ›´å¤šå…ƒç´ ï¼Œåˆ™éœ€è¦æŒ‡å®šä¸€ä¸ª<code>gradient</code>å‚æ•°æ¥æŒ‡å®šå¼ é‡çš„å½¢çŠ¶ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">x = torch.ones(<span class="number">2</span>,<span class="number">2</span>,requires_grad=true)</span><br><span class="line">print(x)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([[1., 1.],</span></span><br><span class="line"><span class="string">        [1., 1.]], requires_grad=True)'''</span></span><br></pre></td></tr></table></figure></div>
<p>é’ˆå¯¹å¼ é‡xåšæ“ä½œ</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">y = x+<span class="number">2</span></span><br><span class="line">print(y)</span><br><span class="line">print(y.grad_fn)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([[3., 3.],</span></span><br><span class="line"><span class="string">        [3., 3.]], grad_fn=&lt;AddBackward0&gt;)</span></span><br><span class="line"><span class="string">&lt;AddBackward0 object at 0x7fe1db427470&gt;'''</span></span><br></pre></td></tr></table></figure></div>
<p>é’ˆå¯¹yåšæ›´å¤šæ“ä½œï¼š</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">z = y*y*<span class="number">3</span></span><br><span class="line">out = z.mean()</span><br><span class="line">print(z,out)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([[27., 27.],</span></span><br><span class="line"><span class="string">        [27., 27.]], grad_fn=&lt;MulBackward0&gt;) </span></span><br><span class="line"><span class="string">tensor(27., grad_fn=&lt;MeanBackward0&gt;)'''</span></span><br></pre></td></tr></table></figure></div>
<p>.requires_grad(â€¦)ä¼šæ”¹å˜å¼ é‡çš„requires_gradæ ‡è®°ã€‚è¾“å…¥çš„æ ‡è®°é»˜è®¤æ˜¯Falseã€‚å¦‚æœä¸æä¾›ç›¸åº”å‚æ•°ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = torch.randn(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">a = ((a * <span class="number">3</span>) / (a - <span class="number">1</span>))</span><br><span class="line">print(a.requires_grad)</span><br><span class="line">a.requires_grad_(<span class="literal">True</span>)</span><br><span class="line">print(a.requires_grad)</span><br><span class="line">b = (a * a).sum()</span><br><span class="line">print(b.grad_fn)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">False</span></span><br><span class="line"><span class="string">True</span></span><br><span class="line"><span class="string">&lt;SumBackward0 object at 0x7fe1db427dd8&gt;'''</span></span><br></pre></td></tr></table></figure></div>
<p>ç°åœ¨å‘åä¼ æ’­ï¼Œå› ä¸ºè¾“å‡ºåŒ…å«äº†ä¸€ä¸ªæ ‡é‡ï¼Œout.backward()ç­‰åŒäºout.backward(torch.tensor(1.)).</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">out.backward()</span><br><span class="line"><span class="comment">#æ‰“å°æ¢¯åº¦</span></span><br><span class="line">print(x.grad)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([[4.5000, 4.5000],</span></span><br><span class="line"><span class="string">        [4.5000, 4.5000]])'''</span></span><br></pre></td></tr></table></figure></div>
<p>åŸç†è§£é‡Šï¼š</p>
<p><a href="http://image-paul-blogs.test.upcdn.net/pytorch/p01.jpeg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p01.jpeg" class="lazyload"></a></p>
<blockquote>
<p>scalar funcation:æ ‡é‡å‡½æ•°</p>
<p>l = ay1+by2+â€¦kym</p>
</blockquote>
<p>ç»§ç»­çœ‹ä¸€ä¸ªé›…å…‹æ¯”å‘é‡ç§¯çš„ä¾‹å­</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">3</span>,requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">y = x*<span class="number">2</span></span><br><span class="line"><span class="keyword">while</span> y.data.norm()&lt;<span class="number">1000</span>:</span><br><span class="line">    y=y*<span class="number">2</span></span><br><span class="line">print(y)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([ -444.6791,   762.9810, -1690.0941], grad_fn=&lt;MulBackward0&gt;)'''</span></span><br></pre></td></tr></table></figure></div>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œyä¸å†æ˜¯ä¸€ä¸ªæ ‡é‡ã€‚torch.autogradä¸èƒ½ç›´æ¥è®¡ç®—æ•´ä¸ªçš„é›…å¯æ¯”ï¼Œä½†æ˜¯å¦‚æœåªæƒ³è¦é›…å…‹æ¯”å‘é‡ç§¯ï¼Œåªéœ€è¦ç®€å•çš„ä¼ é€’å‘é‡ç»™backwardä½œä¸ºå‚æ•°(a,bâ€¦k)ï¼Œå…¶å¤§å°ç­‰äºy.sizeã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">v = torch.tensor([<span class="number">0.1</span>, <span class="number">1.0</span>, <span class="number">0.0001</span>], dtype=torch.float)</span><br><span class="line">y.backward(v)</span><br><span class="line"></span><br><span class="line">print(x.grad)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">tensor([1.0240e+02, 1.0240e+03, 1.0240e-01])'''</span></span><br></pre></td></tr></table></figure></div>
<h2 id="è‡ªåŠ¨æ±‚å¯¼"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨æ±‚å¯¼"></a> è‡ªåŠ¨æ±‚å¯¼</h2>
<p>è‡ªåŠ¨æ±‚å¯¼æ˜¯pytorchéå¸¸é‡è¦ç‰¹æ€§ï¼Œèƒ½å¤Ÿé¿å…æ‰‹åŠ¨è®¡ç®—éå¸¸å¤æ‚çš„å¯¼æ•°ã€‚</p>
<h3 id="ç®€å•æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"><a class="markdownIt-Anchor" href="#ç®€å•æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"></a> ç®€å•æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x = torch.Tensor([<span class="number">2</span>],requires_grad=<span class="literal">True</span>)</span><br><span class="line">y = x+<span class="number">2</span></span><br><span class="line">z = y**<span class="number">2</span> +<span class="number">3</span></span><br><span class="line">print(z)</span><br><span class="line"><span class="comment">#outputs</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 19</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>
<p>é€šè¿‡ä¸Šé¢æ“ä½œå¾—åˆ°äº†ç»“æœå°±æ˜¯zï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è¡¨ç¤ºä¸ºæ•°å­¦å…¬å¼ï¼š</p>
<p><code>z = (x+2)^2+3</code></p>
<p>é‚£ä¹ˆä»zå¯¹xæ±‚å¯¼å°±æ˜¯</p>
<p><code>dz/dx = 2(x+2)=2(2+2)=8</code></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨è‡ªåŠ¨æ±‚å¯¼</span></span><br><span class="line">z.backward()</span><br><span class="line">print(x.grad)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 8</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1]'''</span></span><br></pre></td></tr></table></figure></div>
<h3 id="å¤æ‚æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"><a class="markdownIt-Anchor" href="#å¤æ‚æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼"></a> å¤æ‚æƒ…å†µä¸‹çš„è‡ªåŠ¨æ±‚å¯¼</h3>
<p>ä¸Šé¢æ˜¯å¯¹æ ‡é‡æ±‚å¯¼ï¼Œä¹Ÿå¯ä»¥å¯¹å‘é‡æˆ–è€…çŸ©é˜µè‡ªåŠ¨æ±‚å¯¼ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">m = torch.FloatTensor([[<span class="number">2</span>,<span class="number">3</span>]],requires_grad=<span class="literal">True</span>)<span class="comment">#æ„å»º1*2çŸ©é˜µ</span></span><br><span class="line">n = torch.zeros(<span class="number">1</span>,<span class="number">2</span>)<span class="comment">#æ„å»ºå¤§å°ç›¸åŒçš„0çŸ©é˜µ</span></span><br><span class="line">print(m)</span><br><span class="line">print(n)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 2  3</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1x2]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 0  0</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1x2]'''</span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é€šè¿‡mä¸­çš„å€¼è®¡ç®—æ–°çš„nä¸­çš„å€¼</span></span><br><span class="line">n[<span class="number">0</span>,<span class="number">0</span>] = m[<span class="number">0</span>,<span class="number">0</span>]**<span class="number">2</span></span><br><span class="line">n[<span class="number">0</span>,<span class="number">1</span>] = m[<span class="number">0</span>,<span class="number">1</span>]**<span class="number">3</span></span><br></pre></td></tr></table></figure></div>
<p>å°†ä¸Šé¢çš„å¼å­å†™æˆæ•°å­¦å…¬å¼å¯å¾—ï¼š<code>n = (n0,n1) = (m0^2,m1^3)</code></p>
<p>ä¸‹é¢ç›´æ¥å¯¹nè¿›è¡Œåå‘ä¼ æ’­ï¼Œä¹Ÿå°±æ˜¯å¯¹næ±‚mçš„å¯¼æ•°ã€‚</p>
<p><a href="http://image-paul-blogs.test.upcdn.net/pytorch/p03.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p03.svg" class="lazyload"></a></p>
<p>åœ¨pytorchä¸­è°ƒç”¨è‡ªåŠ¨æ±‚å¯¼ï¼Œå¾€å¾€éœ€è¦åœ¨backward()ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°å½¢çŠ¶å¤§å°å’Œnä¸€æ ·å¤§ã€‚æ¯”å¦‚æ˜¯ï¼ˆw0,w1ï¼‰,é‚£ä¹ˆè‡ªåŠ¨æ±‚å¯¼ç»“æœå°±æ˜¯ï¼š</p>
<p><a href="http://image-paul-blogs.test.upcdn.net/pytorch/p04.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p04.svg" class="lazyload"></a></p>
<p><a href="http://image-paul-blogs.test.upcdn.net/pytorch/p09.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p09.svg" class="lazyload"></a></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">n.backward(torch.ones_like(n))<span class="comment">#(1,1)</span></span><br><span class="line">print(m_grad)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string">  4  27</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1x2]'''</span></span><br></pre></td></tr></table></figure></div>
<p><a href="http://image-paul-blogs.test.upcdn.net/pytorch/p05.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p05.svg" class="lazyload"></a></p>
<p><a href="http://image-paul-blogs.test.upcdn.net/pytorch/p10.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p10.svg" class="lazyload"></a></p>
<h3 id="å¤šæ¬¡è‡ªåŠ¨æ±‚å¯¼"><a class="markdownIt-Anchor" href="#å¤šæ¬¡è‡ªåŠ¨æ±‚å¯¼"></a> å¤šæ¬¡è‡ªåŠ¨æ±‚å¯¼</h3>
<p>é€šè¿‡è°ƒç”¨backward()å¯ä»¥è¿›è¡Œä¸€æ¬¡æ±‚å¯¼ï¼Œè€Œå†æ¬¡è°ƒç”¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚æ˜¯å› ä¸ºpytorché»˜è®¤åšå®Œä¸€æ¬¡è‡ªåŠ¨æ±‚å¯¼åï¼Œè®¡ç®—å›¾å°±ä¼šè¢«ä¸¢å¼ƒï¼Œæ‰€ä»¥ä¸¤æ¬¡è‡ªåŠ¨æ±‚å¯¼éœ€è¦è¿›è¡Œè®¾ç½®ã€‚</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x = torch.FloatTensor([<span class="number">3</span>],requires_grad=<span class="literal">True</span>)</span><br><span class="line">y = x*<span class="number">2</span>+x**<span class="number">2</span>+<span class="number">3</span></span><br><span class="line">print(y)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 18</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1]'''</span></span><br></pre></td></tr></table></figure></div>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">y.backward(retain_graph=<span class="literal">True</span>)</span><br><span class="line">print(x.grad)</span><br><span class="line">y.backward()<span class="comment">#å†åšä¸€æ¬¡æ±‚å¯¼ä¸ä¼šä¿ç•™è®¡ç®—å›¾</span></span><br><span class="line">print(x.grad)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 8</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1]</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 16</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 1]'''</span></span><br></pre></td></tr></table></figure></div>
<p>ä¾‹ï¼š</p>
<p>å®šä¹‰ï¼š<a href="http://image-paul-blogs.test.upcdn.net/pytorch/p06.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p06.svg" class="lazyload"></a></p>
<p>å¸Œæœ›æ±‚ï¼š<a href="http://image-paul-blogs.test.upcdn.net/pytorch/p07.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p07.svg" class="lazyload"></a></p>
<p>å‚è€ƒç­”æ¡ˆï¼š<a href="http://image-paul-blogs.test.upcdn.net/pytorch/p08.svg" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="http://image-paul-blogs.test.upcdn.net/pytorch/p08.svg" class="lazyload"></a></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">x = torch.FloatTensor([<span class="number">2</span>,<span class="number">3</span>],requires_grad=<span class="literal">True</span>)</span><br><span class="line">k = torch.zeros(<span class="number">2</span>)</span><br><span class="line">k[<span class="number">0</span>] = x[<span class="number">0</span>]**<span class="number">2</span>+<span class="number">3</span>**x[<span class="number">1</span>]</span><br><span class="line">k[<span class="number">1</span>] = x[<span class="number">1</span>]**<span class="number">2</span>+<span class="number">2</span>**x[<span class="number">0</span>]</span><br><span class="line">j = torch.zeros(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">k.backward(torch.FloatTensor([<span class="number">1</span>,<span class="number">0</span>]),retain_graph=<span class="literal">True</span>)</span><br><span class="line">j[<span class="number">0</span>] = x.grad.data</span><br><span class="line">x.grad.data.zero_()<span class="comment">#å½’é›¶ä¹‹å‰æ±‚å¾—æ¢¯åº¦</span></span><br><span class="line">k.backward(torch.FloatTensor([<span class="number">0</span>,<span class="number">1</span>]))</span><br><span class="line">j[<span class="number">1</span>] = x.grad.data</span><br><span class="line">print(j)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">4  3</span></span><br><span class="line"><span class="string">2  6</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 2x2]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Paul Yu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/03/08/pytorch%E5%9F%BA%E7%A1%80/">http://yoursite.com/2020/03/08/pytorch%E5%9F%BA%E7%A1%80/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://yoursite.com">å“ˆçš®ğŸ–</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/pytorch/">pytorch    </a><a class="post-meta__tags" href="/tags/%E5%85%A5%E9%97%A8/">å…¥é—¨    </a></div><div class="post_share"><div class="social-share" data-image="http://image-paul-blogs.test.upcdn.net/blog/a13.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.png" alt="å¾®ä¿¡"><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.png" alt="æ”¯ä»˜å¯¶"><div class="post-qr-code__desc">æ”¯ä»˜å¯¶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/03/12/%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8BMatplotlib(%E4%B8%80)/"><img class="prev_cover lazyload" data-src="http://image-paul-blogs.test.upcdn.net/blog/a2.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>å¯è§†åŒ–ä¹‹Matplotlib(ä¸€)</span></div></a></div><div class="next-post pull_right"><a href="/2020/03/08/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"><img class="next_cover lazyload" data-src="http://image-paul-blogs.test.upcdn.net/blog/a9.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>ç¥ç»ç½‘ç»œ--çº¿æ€§æ¨¡å‹ä¸æ¢¯åº¦ä¸‹é™</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/03/08/ç¥ç»ç½‘ç»œ/" title="ç¥ç»ç½‘ç»œ--çº¿æ€§æ¨¡å‹ä¸æ¢¯åº¦ä¸‹é™"><img class="relatedPosts_cover lazyload"data-src="http://image-paul-blogs.test.upcdn.net/blog/a9.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-08</div><div class="relatedPosts_title">ç¥ç»ç½‘ç»œ--çº¿æ€§æ¨¡å‹ä¸æ¢¯åº¦ä¸‹é™</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'b7cd8445bdb1b19631d9',
  clientSecret: '7d1af09b37d2980e12c8d08d4749917555bc2cef',
  repo: 'nicePaul521.github.io',
  owner: 'nicePaul521',
  admin: 'nicePaul521',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN',
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
}</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By Paul Yu</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">hi,welcome to my<a href="https://nicepaul.top/" target="_blank" rel="noopener"> blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/calendar.js"></script><script src="/js/languages.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/click_heart.js"></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/ClickShowText.js"></script></body></html>